import{q as j,r as i,j as s,B as v,T as p,n as d}from"./index-D4QZao9a.js";import{U as C}from"./input-SWzy2ybu.js";import{U as S}from"./select-Bm0LgXwg.js";import{u as T,c as U}from"./apiUpdateCalls-CEM1YQVb.js";import{g as V}from"./apiGetCalls-BRT45bd3.js";import"./settings-DtboB3m9.js";import"./index-CGmBuFWw.js";import"./IconButton-BSwcrY0J.js";const k=({isEdit:a,data:t})=>{const n=j(),[l,g]=i.useState({id:t==null?void 0:t.cat_id,value:t==null?void 0:t.cat_title}),[o,f]=i.useState((t==null?void 0:t.title)||""),[u,m]=i.useState([]),[x,c]=i.useState(!1);i.useEffect(()=>{V("category").then(e=>m(e.results)).catch(e=>e)},[]);const h=i.useMemo(()=>{const e=[];return u.map(r=>{e.push({id:r.id,value:r.title})}),e},[u]),y=()=>{if(!o||!l)return;c(!0);const e={title:o,category:l.id};a?T("filter_category",t==null?void 0:t.id,e).then(r=>(n("/filter-categories",{replace:!0}),r)).catch(r=>r).finally(()=>c(!1)):U("filter_category",e).then(r=>(n("/filter-categories",{replace:!0}),r)).catch(r=>r).finally(()=>c(!1))};return s.jsxs(v,{children:[s.jsxs(p,{sx:{margin:"20px 0 10px"},children:[s.jsx("span",{style:{color:"red"},children:"*"})," Select Category"]}),s.jsx(S,{options:h,defaultValue:l,placeholder:"",updateValue:e=>{const r={id:e.id,value:e.value};g(r)}}),s.jsxs(p,{sx:{margin:"20px 0 10px"},children:[s.jsx("span",{style:{color:"red"},children:"*"})," Title"]}),s.jsx(C,{updateValue:e=>f(e),defaultValue:o,fullWidth:!0}),s.jsx(d,{variant:"contained",disabled:x,sx:{marginTop:"20px"},onClick:y,children:a?"Edit":"Create"})]})};export{k as default};
