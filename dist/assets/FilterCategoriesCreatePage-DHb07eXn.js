import{q as j,r as l,j as s,B as v,T as p,n as d}from"./index-DxToOhWZ.js";import{U as C}from"./input-C_9GwNBk.js";import{U as S}from"./select-D_5_mR4D.js";import{u as T,c as U}from"./apiUpdateCalls-c3S0mrRd.js";import{g as V}from"./apiGetCalls-3rolZ__Z.js";import"./settings-DvgpDYXI.js";import"./index-Cgmb0aMc.js";import"./IconButton-CfbDMdYV.js";const k=({isEdit:a,data:t})=>{const n=j(),[o,g]=l.useState({id:t==null?void 0:t.cat_id,value:t==null?void 0:t.cat_title}),[i,f]=l.useState((t==null?void 0:t.title)||""),[u,m]=l.useState([]),[x,c]=l.useState(!1);l.useEffect(()=>{V("category").then(e=>m(e.results)).catch(e=>e)},[]);const h=l.useMemo(()=>{const e=[];return u.map(r=>{e.push({id:r.id,value:r.title})}),e},[u]),y=()=>{if(!i||!o)return;c(!0);const e={title:i,category:o.id};a?T("filter_category",t==null?void 0:t.id,e).then(r=>(n("/filter-categories",{replace:!0}),r)).catch(r=>console.log(r)).finally(()=>c(!1)):U("filter_category",e).then(r=>(n("/filter-categories",{replace:!0}),r)).catch(r=>r).finally(()=>c(!1))};return s.jsxs(v,{children:[s.jsxs(p,{sx:{margin:"20px 0 10px"},children:[s.jsx("span",{style:{color:"red"},children:"*"})," Select Category"]}),s.jsx(S,{options:h,defaultValue:o,placeholder:"",updateValue:e=>{const r={id:e.id,value:e.value};g(r)}}),s.jsxs(p,{sx:{margin:"20px 0 10px"},children:[s.jsx("span",{style:{color:"red"},children:"*"})," Title"]}),s.jsx(C,{updateValue:e=>f(e),defaultValue:i,fullWidth:!0}),s.jsx(d,{variant:"contained",disabled:x,sx:{marginTop:"20px"},onClick:y,children:a?"Edit":"Create"})]})};export{k as default};
