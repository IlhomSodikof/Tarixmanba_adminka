import{r as l,q as Y,j as r,B as S,L as _,T as n,n as q}from"./index-BBG2Og9a.js";import{U as w}from"./select-LVQkeg-d.js";import{U as t}from"./input-BYqJndx-.js";import{U as V}from"./file-B-FegUKS.js";import{u as E,c as G}from"./apiUpdateCalls-BQROgRcf.js";import{u as P}from"./useFetchGetAllDatas-CmaUik0_.js";import{g as R}from"./getFilteredList-CAX_eyoo.js";import"./settings-YpfnS1Ri.js";import"./index-DZox5DOm.js";import"./IconButton-DTZIzRac.js";import"./apiGetCalls-DxGRh-56.js";const ee=({isEdit:y,data:e})=>{const[o,C]=l.useState({id:e==null?void 0:e.category,value:e==null?void 0:e.cat_library}),[p,d]=l.useState((e==null?void 0:e.title)||""),[u,L]=l.useState((e==null?void 0:e.author)||""),[c,v]=l.useState((e==null?void 0:e.type)||""),[x,F]=l.useState(e==null?void 0:e.year),[a,T]=l.useState((e==null?void 0:e.country)||""),[g,U]=l.useState((e==null?void 0:e.language)||""),[f,A]=l.useState((e==null?void 0:e.image)||null),[h,I]=l.useState((e==null?void 0:e.file)||null),[D,m]=l.useState(!1),j=Y(),{data:k,loading:b}=P("library_category"),B=R({data:k}),N=()=>{if(!o||!p||!u||!c||!x||!a||!g)return;m(!0);const s=new FormData;s.append("title",p),s.append("category",o==null?void 0:o.id),s.append("author",u),s.append("type",c),s.append("year",x+""),s.append("country",a),s.append("language",g),s.append("author",u),f&&s.append("image",f[0]),h&&s.append("file",h[0]),y?E("library",e==null?void 0:e.id,s,!0).then(i=>(j("/libraries",{replace:!0}),i)).catch(i=>console.log(i)).finally(()=>m(!1)):G("library",s,!0).then(i=>(j("/libraries",{replace:!0}),i)).catch(i=>i).finally(()=>m(!1))};return r.jsxs(S,{children:[b&&r.jsx(_,{}),!b&&r.jsxs(S,{children:[r.jsxs(n,{sx:{margin:"5px 0"},children:[r.jsx("span",{style:{color:"red"},children:"*"})," Select Library Category"]}),r.jsx(w,{options:B,placeholder:"",defaultValue:o||{id:"",value:""},updateValue:s=>{const i={id:s.id,value:s.value};C(i)}}),r.jsxs(n,{sx:{margin:"15px 0 5px"},children:[r.jsx("span",{style:{color:"red"},children:"*"})," Title"]}),r.jsx(t,{updateValue:s=>d(s),defaultValue:p}),r.jsxs(n,{sx:{margin:"15px 0 5px"},children:[r.jsx("span",{style:{color:"red"},children:"*"})," Author"]}),r.jsx(t,{updateValue:s=>L(s),defaultValue:u}),r.jsxs(n,{sx:{margin:"15px 0 5px"},children:[r.jsx("span",{style:{color:"red"},children:"*"})," Type"]}),r.jsx(t,{updateValue:s=>v(s),defaultValue:c}),r.jsxs(n,{sx:{margin:"15px 0 5px"},children:[r.jsx("span",{style:{color:"red"},children:"*"})," Year"]}),r.jsx(t,{updateValue:s=>F(Number(s)),type:"number",defaultValue:x}),r.jsxs(n,{sx:{margin:"15px 0 5px"},children:[r.jsx("span",{style:{color:"red"},children:"*"})," Country"]}),r.jsx(t,{updateValue:s=>T(s),defaultValue:a}),r.jsxs(n,{sx:{margin:"15px 0 5px"},children:[r.jsx("span",{style:{color:"red"},children:"*"})," Language"]}),r.jsx(t,{updateValue:s=>U(s),defaultValue:g}),r.jsx(n,{sx:{margin:"15px 0 5px"},children:"Click to upload an image"}),r.jsx(V,{fileChange:s=>A(s),id:"1",defaultFile:e==null?void 0:e.file}),r.jsx(n,{sx:{margin:"15px 0 5px"},children:"Click to upload an file"}),r.jsx(V,{fileChange:s=>I(s),id:"2",defaultFile:e==null?void 0:e.file}),r.jsx(q,{onClick:N,disabled:D,variant:"contained",sx:{marginTop:"20px"},children:y?"Update":"Create"})]})]})};export{ee as default};
