import{r as l,q as _,j as r,B as V,L as q,T as i,n as G}from"./index-DT-Q6kAP.js";import{U as P}from"./select-_MLwrEpR.js";import{U as t}from"./input-DnatyFKj.js";import{U as C,g as L}from"./getImage-C7n_AywX.js";import{u as R,c as z}from"./apiUpdateCalls-CBTCy7tK.js";import{u as H}from"./useFetchGetAllDatas-DTjlX0yT.js";import{g as J}from"./getFilteredList-Bj01mFh5.js";import"./settings-NaXnANWD.js";import"./index-1V4nhdya.js";import"./IconButton-Dp_Z0XkK.js";import"./apiGetCalls-C5kV7Ldm.js";const le=({isEdit:f,data:e})=>{const[o,v]=l.useState({id:e==null?void 0:e.category,value:e==null?void 0:e.cat_library}),[u,F]=l.useState((e==null?void 0:e.title)||""),[p,I]=l.useState((e==null?void 0:e.author)||""),[c,T]=l.useState((e==null?void 0:e.type)||""),[x,A]=l.useState(e==null?void 0:e.year),[g,U]=l.useState((e==null?void 0:e.country)||""),[m,D]=l.useState((e==null?void 0:e.language)||""),[h,k]=l.useState((e==null?void 0:e.image)||null),[j,w]=l.useState((e==null?void 0:e.file)||null),[B,a]=l.useState(!1),b=_(),{data:d,loading:S}=H("library_category"),E=J({data:d}),N=async()=>{if(!o||!u||!p||!c||!x||!g||!m)return;a(!0);const s=new FormData;if(s.append("title",u),s.append("category",o==null?void 0:o.id),s.append("author",p),s.append("type",c),s.append("year",x+""),s.append("country",g),s.append("language",m),s.append("author",p),f){const n=await L(e==null?void 0:e.image,"image");s.append("image",n);const Y=await L(e==null?void 0:e.file,"file");s.append("file",Y),R("library",e==null?void 0:e.id,s,!0).then(y=>(b("/libraries",{replace:!0}),y)).catch(y=>y).finally(()=>a(!1))}else h&&s.append("image",h[0]),j&&s.append("file",j[0]),z("library",s,!0).then(n=>(b("/libraries",{replace:!0}),n)).catch(n=>n).finally(()=>a(!1))};return r.jsxs(V,{children:[S&&r.jsx(q,{}),!S&&r.jsxs(V,{children:[r.jsxs(i,{sx:{margin:"5px 0"},children:[r.jsx("span",{style:{color:"red"},children:"*"})," Select Library Category"]}),r.jsx(P,{options:E,placeholder:"",defaultValue:o||{id:"",value:""},updateValue:s=>{const n={id:s.id,value:s.value};v(n)}}),r.jsxs(i,{sx:{margin:"15px 0 5px"},children:[r.jsx("span",{style:{color:"red"},children:"*"})," Title"]}),r.jsx(t,{updateValue:s=>F(s),defaultValue:u}),r.jsxs(i,{sx:{margin:"15px 0 5px"},children:[r.jsx("span",{style:{color:"red"},children:"*"})," Author"]}),r.jsx(t,{updateValue:s=>I(s),defaultValue:p}),r.jsxs(i,{sx:{margin:"15px 0 5px"},children:[r.jsx("span",{style:{color:"red"},children:"*"})," Type"]}),r.jsx(t,{updateValue:s=>T(s),defaultValue:c}),r.jsxs(i,{sx:{margin:"15px 0 5px"},children:[r.jsx("span",{style:{color:"red"},children:"*"})," Year"]}),r.jsx(t,{updateValue:s=>A(Number(s)),type:"number",defaultValue:x}),r.jsxs(i,{sx:{margin:"15px 0 5px"},children:[r.jsx("span",{style:{color:"red"},children:"*"})," Country"]}),r.jsx(t,{updateValue:s=>U(s),defaultValue:g}),r.jsxs(i,{sx:{margin:"15px 0 5px"},children:[r.jsx("span",{style:{color:"red"},children:"*"})," Language"]}),r.jsx(t,{updateValue:s=>D(s),defaultValue:m}),r.jsx(i,{sx:{margin:"15px 0 5px"},children:"Click to upload an image"}),r.jsx(C,{fileChange:s=>k(s),id:"1",defaultFile:e==null?void 0:e.file}),r.jsx(i,{sx:{margin:"15px 0 5px"},children:"Click to upload an file"}),r.jsx(C,{fileChange:s=>w(s),id:"2",defaultFile:e==null?void 0:e.file}),r.jsx(G,{onClick:N,disabled:B,variant:"contained",sx:{marginTop:"20px"},children:f?"Edit":"Create"})]})]})};export{le as default};
