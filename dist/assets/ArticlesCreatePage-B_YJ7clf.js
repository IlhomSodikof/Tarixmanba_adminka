import{r as l,q as y,j as n,B as C,T as p,n as F}from"./index-BBG2Og9a.js";import{U as x}from"./input-BYqJndx-.js";import{u as S,c as v}from"./apiUpdateCalls-BQROgRcf.js";import{U as T}from"./file-B-FegUKS.js";import{g as U}from"./getImage-CkJD2VpG.js";import"./settings-YpfnS1Ri.js";const b=({isEdit:r=!1,data:e})=>{const[i,m]=l.useState((e==null?void 0:e.title)||""),[u,a]=l.useState((e==null?void 0:e.content)||""),[o,g]=l.useState((e==null?void 0:e.file)||null),[h,c]=l.useState(!1),f=y(),j=async()=>{if(!i||!o&&!r)return;c(!0);const t=new FormData;if(t.append("title",i),t.append("content",u),o)t.append("file",o[0]);else{const s=await U(e==null?void 0:e.file,"file");t.append("file",s)}r?S("news",e==null?void 0:e.id,t,!0).then(s=>(f("/articles",{replace:!0}),s)).catch(s=>console.log(s)).finally(()=>c(!1)):v("news",t,!0).then(s=>(f("/articles",{replace:!0}),s)).catch(s=>s).finally(()=>c(!1))};return n.jsxs(C,{children:[n.jsxs(p,{sx:{marginBottom:"10px"},children:[n.jsx("span",{style:{color:"red"},children:"*"})," Title"]}),n.jsx(x,{updateValue:t=>m(t),defaultValue:i}),n.jsx(p,{sx:{margin:"20px 0 10px"},children:"Content"}),n.jsx(x,{updateValue:t=>a(t),defaultValue:u}),n.jsx(p,{sx:{margin:"20px 0 10px"},children:"File"}),n.jsx(T,{fileChange:t=>g(t),defaultFile:e==null?void 0:e.file}),n.jsx(F,{variant:"contained",disabled:h,sx:{marginTop:"20px"},onClick:j,children:r?"Update":"Create"})]})};export{b as default};
