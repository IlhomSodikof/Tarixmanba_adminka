import{r,q as y,j as n,B as C,T as p,n as F}from"./index-DT-Q6kAP.js";import{U as x}from"./input-DnatyFKj.js";import{u as S,c as v}from"./apiUpdateCalls-CBTCy7tK.js";import{U as T,g as w}from"./getImage-C7n_AywX.js";import"./settings-NaXnANWD.js";const D=({isEdit:l=!1,data:e})=>{const[i,m]=r.useState((e==null?void 0:e.title)||""),[u,a]=r.useState((e==null?void 0:e.content)||""),[o,g]=r.useState((e==null?void 0:e.file)||null),[h,c]=r.useState(!1),f=y(),j=async()=>{if(!i||!o&&!l)return;c(!0);const t=new FormData;if(t.append("title",i),t.append("content",u),!l)o&&t.append("file",o[0]);else{const s=await w(e==null?void 0:e.file,"file");t.append("file",s)}l?S("news",e==null?void 0:e.id,t,!0).then(s=>(f("/articles",{replace:!0}),s)).catch(s=>s).finally(()=>c(!1)):v("news",t,!0).then(s=>(f("/articles",{replace:!0}),s)).catch(s=>s).finally(()=>c(!1))};return n.jsxs(C,{children:[n.jsxs(p,{sx:{marginBottom:"10px"},children:[n.jsx("span",{style:{color:"red"},children:"*"})," Title"]}),n.jsx(x,{updateValue:t=>m(t),defaultValue:i}),n.jsx(p,{sx:{margin:"20px 0 10px"},children:"Content"}),n.jsx(x,{updateValue:t=>a(t),defaultValue:u}),n.jsx(p,{sx:{margin:"20px 0 10px"},children:"File"}),n.jsx(T,{fileChange:t=>g(t),defaultFile:e==null?void 0:e.file}),n.jsx(F,{variant:"contained",disabled:h,sx:{marginTop:"20px"},onClick:j,children:l?"Edit":"Create"})]})};export{D as default};
