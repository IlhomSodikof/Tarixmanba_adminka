import{r as n,q as b,j as s,B as d,T as l,n as w}from"./index-Db0dQZJX.js";import{U as j}from"./input--S9sTLc2.js";import{U as A,g as B}from"./getImage-3W5ySSqB.js";import{S as D,A as S,U as E}from"./switch-BCQvEhpB.js";import{u as O,c as k}from"./apiUpdateCalls-C5n2v0NK.js";import"./settings-CaUciO57.js";import"./Close-CQ66syLD.js";import"./IconButton-CvBceS6c.js";const J=({isEdit:o,data:e})=>{const[i,v]=n.useState(null),[c,y]=n.useState((e==null?void 0:e.title)||""),[u,I]=n.useState((e==null?void 0:e.order)||0),[m,C]=n.useState((e==null?void 0:e.interactive)||!1),[U,p]=n.useState(!1),[a,f]=n.useState(null),[F,x]=n.useState(!1),[g,T]=n.useState(""),h=b(),V=async()=>{if(!o&&!i||!c||!u){T("Please fill all the required fields");return}p(!0);const r=new FormData;if(i&&i[0])r.append("icon",i[0],i[0].name);else{const t=await B(e==null?void 0:e.icon,e==null?void 0:e.icon);r.append("icon",t)}r.append("title",c),r.append("order",u.toString()),r.append("interactive",m.toString()),o?O("category",e==null?void 0:e.id,r,!0).then(t=>(console.log(t),h("/categories",{replace:!0}),t)).catch(t=>{x(!0),f(t)}).finally(()=>{p(!1)}):k("category",r,!0).then(t=>(h("/categories",{replace:!0}),t)).catch(t=>{x(!0),f(t)}).finally(()=>{p(!1)})};return s.jsxs(d,{children:[s.jsx(D,{open:F,autoHideDuration:3e3,onClose:()=>x(!1),children:s.jsx(S,{severity:"error",variant:"filled",sx:{width:"100%"},children:a==null?void 0:a.message})}),s.jsxs(l,{sx:{margin:"10px 0"},children:[s.jsx("span",{style:{color:"red"},children:"*"})," Title"]}),s.jsx(j,{updateValue:r=>y(r),defaultValue:c}),s.jsx(l,{sx:{marginBottom:"20px"}}),s.jsx(A,{fileChange:r=>v(r),defaultFile:e==null?void 0:e.icon}),s.jsxs(l,{sx:{margin:"20px 0 10px"},children:[s.jsx("span",{style:{color:"red"},children:"*"})," Order"]}),s.jsx(j,{updateValue:r=>I(r),type:"number",defaultValue:u}),s.jsx(l,{sx:{margin:"10px 0"},children:"Interactive Map"}),s.jsx(E,{value:m,changeValue:r=>C(r)}),s.jsx(w,{variant:"contained",disabled:U,onClick:V,sx:{marginTop:"20px"},children:o?"Edit":"Create"}),g&&s.jsx(S,{severity:"error",sx:{margin:"20px 0"},children:g})]})};export{J as default};
